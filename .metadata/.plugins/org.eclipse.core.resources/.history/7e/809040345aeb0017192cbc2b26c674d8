import java.util.Deque;
import java.util.LinkedList;

public class MinStack {
	
	class Pair {
		private Integer num;
		private int counter;
		public Pair(Integer num) {
			this.num = num;
			counter = 1;
		}
		public Integer getNum() {
			return num;
		}
		public int getCounter() {
			return counter;
		}
		public void counterAdd() {
			counter++;
		}
		public void counterMin() {
			counter--;
		}
	}
	
	Deque<Integer> stack;
	Deque<Pair> min;
	
	public MinStack() {
		stack = new LinkedList<Integer>();
		min = new LinkedList<Pair>();
	}
	
	public void push(Integer ele){
		stack.offerFirst(ele);
		if (min.isEmpty() || min.peekFirst().getNum() > ele) {
			min.offer(new Pair(ele));
		} else if (min.peekFirst().getNum() == ele) {
			min.peekFirst().counterAdd();
		}
	}
	public Integer poll() {
		if (stack.size() == 0) {
			return null;
		}
		Integer res = stack.pollFirst();
		//update min stack;
		Pair cur = min.peekFirst();
		if (res == cur.getNum()) {
			cur.counterMin();
			if (cur.getCounter() == 0) {
				min.pollFirst();
			}
		}
		return res;
	}
	public Integer peek() {
		return stack.peekFirst();
	}
	public Integer min() {
		return min.peekFirst().getNum();
	}
}


