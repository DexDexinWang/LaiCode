
public class Solution6 {
	public static void main(String[] args) {
		int[] input1  = new int[]{2,5,8,3,6,1,10,4,9,7};
		int[] input2 = new int[]{3,8,5,2,4,1,6,10,9,7};
		Solution5 s = new Solution5();
		s.reconstruct(input1, input2);
	}
	
	  public TreeNode reconstruct(int[] in, int[] level) {
		    if (in.length == 0) {
		      return null;
		    }
		    Map<Integer, Integer> map = new HashMap<Integer,Integer>();
		    for(int i = 0; i < in.length; i++) {
		      map.put(in[i], i);
		    }
		    List<Integer> list = new ArrayList<Integer>(); 
		    for(int num: level) {
		      list.add(num);
		    }
		    return reconstruct(map,list);
		  }
		  
		  public TreeNode reconstruct(Map<Integer, Integer> map,List<Integer> list) {
		    if (list == null) {
		      return null;
		    }
		    TreeNode root = new TreeNode(list.remove(0));
		    List<Integer> left = new ArrayList<Integer>();
		    List<Integer> right = new ArrayList<Integer>();
		    for(int num : list) {
		      if (map.get(num) < map.get(root.key)) {
		        left.add(num);
		      } else {
		        right.add(num);
		      }
		    }
		    root.left = reconstruct(map, left);
		    root.right = reconstruct(map, right);
		    return root;
		  }
}
