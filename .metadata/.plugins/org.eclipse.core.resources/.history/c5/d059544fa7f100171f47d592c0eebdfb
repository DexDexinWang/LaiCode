import generator.TreeNode;
public class Solution38 {

	public static void main(String[] args) {
		TreeNode input = new TreeNode(1);
		input.left = new TreeNode(2);
		recover(input).print();
	}
	public static TreeNode recover(TreeNode root) {
		TreeNode first = null;
		TreeNode second = null;
		TreeNode prev = new TreeNode(Integer.MAX_VALUE);
		inorderTraverse(root, first, second, prev);
		if (second == null) {
			second = root;
		}
		int temp = first.key;
		first.key = second.key;
		second.key = temp;
		return root;
	}
		  
	public static void inorderTraverse(TreeNode root, TreeNode first, TreeNode second, TreeNode prev) {
		if (root == null) {
			return;
		}
		inorderTraverse(root.left, first, second, prev);
		if(first == null && prev.key >= root.key) {
			first = prev;
		}
		if(second == null && prev.key >= root.key) {
			second = prev;
		}
		prev = root;
		inorderTraverse(root.right, first, second, prev);
	} 
}
